<div class="row">
  <div *ngFor="let trip of trips" class="col-md-4 mb-4 d-flex">
    <div class="card flex-fill">
      <div class="card-body">
        <h5 class="card-title">{{ trip.title }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ trip.destination }}</h6>
        <p class="card-text">Budget: â‚¹{{ trip.budget }}</p>
        <p class="card-text">Dates: {{ trip.startDate }} to {{ trip.endDate }}</p>
        <p class="card-text">{{ trip.notes }}</p>

        <button class="btn btn-outline-primary btn-sm me-2" (click)="editTrip(trip)">Edit</button>
        <button class="btn btn-outline-success btn-sm me-2" (click)="toggleItinerary(trip)">Itinerary</button>
        <button class="btn btn-outline-danger btn-sm" (click)="deleteTrip(trip)">Delete</button>

        <div *ngIf="trip.showItinerary" class="mt-3">
          <div *ngFor="let item of trip.itinerary" class="mb-2">
            <strong>Day {{ item.day }}:</strong> {{ item.activity }}
          </div>
          <input type="text" [(ngModel)]="newActivity" class="form-control form-control-sm my-2" placeholder="Add activity..." />
          <button class="btn btn-sm btn-success" (click)="addActivity(trip)">Add Activity</button>
        </div>
      </div>
    </div>

    <!-- Inline Edit Form -->
    <div *ngIf="selectedTrip && selectedTrip.id === trip.id" class="w-100 mt-2">
      <app-trip-edit
        [trip]="selectedTrip"
        (save)="saveTripEdits($event)"
        (cancel)="cancelEdit()"
      ></app-trip-edit>
    </div>
  </div>
</div>
